<% if !user_signed_in? %>
  <div>You must be signed in to Create seasons</div>
<% else %>
<h1 class="header">Seasons</h1>

<div id="seasons">
<% if @seasons.count == 0 %>
  <div id="no_items_message">Add a season using the form below.</div>
<% else %>
  <table class="table table-condensed">
    <tr>
      <th>Actions</th>
      <th>Season</th>
      <th>Teams</th>
      <th>Houses</th>
      <th>Time Slots</th>
      <th>Start Date</th>
      <th>Handicap Calculation</th>
      <th>Schedule</th>
      <th>Results</th>
    </tr>

    <% @seasons.each do |season| %>
    <tr id="season_<%= season.id%>">
      <td>
        <%= link_to 'Delete', season, :method => 'delete', :confirm => 'Are you sure you want to delete this Season?' %> |
        <%= link_to 'Edit', edit_season_path(season) %>
      </td>
      <td><%= season.name %></td>
      <td>has <%= link_to season.teams.count, season_teams_path(season), :alt => 'View Team(s)' %> team(s)</td>
      <td><%= season.houses %></td>
      <td><%= season.time_slots %></td>
      <td><%= season.start_date %></td>
      <td><%= season.handicap_calculation %></td>
      <td><%= link_to 'View Schedule', season_matches_path(season) %></td>
      <td><%= link_to 'View Big Board', bigboard_path(season.id) %></td>
    </tr>
    <% end %>
  </table>
<% end %>
</div>

<div id="create_form" style="display: none;">
  <%= render 'form' %>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $("#create_form").hide();
    $("h1.header").html($("h1.header").html()+" <a href='#' id='add_item_link'>add</a>");
    $("#create_form form").html($("#create_form form").html()+" <button id='cancel'>Cancel</button>");

    $("#add_item_link").click(function() {
      $("#seasons").hide();
      $("#create_form").show();
      $(this).hide();
    });
    $("#cancel").click(function(event) {
      event.preventDefault();
      $("#seasons").show();
      $("#create_form").hide();
      $("#add_item_link").show();
    });
    $("#no_items_message").html("Click <b>add</b> above to add seasons.");
  });
</script>
<% end %>
